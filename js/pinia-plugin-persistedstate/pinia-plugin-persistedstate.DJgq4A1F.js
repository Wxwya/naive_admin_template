function h(r){return typeof r=="object"&&r!==null}function d(r,t){return r=h(r)?r:Object.create(null),new Proxy(r,{get(n,i,e){return i==="key"?Reflect.get(n,i,e):Reflect.get(n,i,e)||Reflect.get(t,i,e)}})}function y(r,t){return t.reduce((n,i)=>n==null?void 0:n[i],r)}function _(r,t,n){return t.slice(0,-1).reduce((i,e)=>/^(__proto__)$/.test(e)?{}:i[e]=i[e]||{},r)[t[t.length-1]]=n,r}function $(r,t){return t.reduce((n,i)=>{const e=i.split(".");return _(n,e,y(r,e))},{})}function v(r,t){return n=>{var i;try{const{storage:e=localStorage,beforeRestore:o=void 0,afterRestore:u=void 0,serializer:s={serialize:JSON.stringify,deserialize:JSON.parse},key:l=t.$id,paths:a=null,debug:c=!1}=n;return{storage:e,beforeRestore:o,afterRestore:u,serializer:s,key:((i=r.key)!=null?i:f=>f)(typeof l=="string"?l:l(t.$id)),paths:a,debug:c}}catch{return n.debug,null}}}function g(r,{storage:t,serializer:n,key:i,debug:e}){try{const o=t==null?void 0:t.getItem(i);o&&r.$patch(n==null?void 0:n.deserialize(o))}catch{}}function p(r,{storage:t,serializer:n,key:i,paths:e,debug:o}){try{const u=Array.isArray(e)?$(r,e):r;t.setItem(i,n.serialize(u))}catch{}}function R(r={}){return t=>{const{auto:n=!1}=r,{options:{persist:i=n},store:e,pinia:o}=t;if(!i)return;if(!(e.$id in o.state.value)){const s=o._s.get(e.$id.replace("__hot:",""));s&&Promise.resolve().then(()=>s.$persist());return}const u=(Array.isArray(i)?i.map(s=>d(s,r)):[d(i,r)]).map(v(r,e)).filter(Boolean);e.$persist=()=>{u.forEach(s=>{p(e.$state,s)})},e.$hydrate=({runHooks:s=!0}={})=>{u.forEach(l=>{const{beforeRestore:a,afterRestore:c}=l;s&&(a==null||a(t)),g(e,l),s&&(c==null||c(t))})},u.forEach(s=>{const{beforeRestore:l,afterRestore:a}=s;l==null||l(t),g(e,s),a==null||a(t),e.$subscribe((c,f)=>{p(f,s)},{detached:!0})})}}var b=R();export{b as s};
